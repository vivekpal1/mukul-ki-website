"use strict";var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,c=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&i(e,s,t[s]);if(r)for(var s of r(t))o.call(t,s)&&i(e,s,t[s]);return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";var a=require("react");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=u(a);const g="Please consider reporting this error at https://github.com/laymonage/giscus/issues/new.";function m(e){return`[giscus] An error occurred. Error message: "${e}".`}function d(e){const t=document.querySelector(`meta[property='og:${e}'],meta[name='${e}']`);return t?t.content:""}function f(){const e=document.getElementById("giscus-css")||document.createElement("style");e.id="giscus-css",e.textContent="\n    .giscus, .giscus-frame {\n      width: 100%;\n    }\n    .giscus-frame {\n      border: none;\n      color-scheme: normal;\n    }\n  ",document.head.prepend(e)}function p(e){const[r,n]=a.useState(""),o=function({repo:e,repoId:t,category:s="",categoryId:r="",mapping:n,term:o="",theme:i="light",reactionsEnabled:c="1",emitMetadata:a="0",inputPosition:u="bottom",lang:l="en",session:g,origin:m}){const f=new URL(location.href);f.searchParams.delete("giscus");const p=f.toString(),b={origin:m=m||p,session:g,theme:i,reactionsEnabled:c,emitMetadata:a,inputPosition:u,repo:e,repoId:t,category:s,categoryId:r,description:d("description")};switch(n){case"url":b.term=p;break;case"title":b.term=document.title;break;case"og:title":b.term=d("title");break;case"specific":b.term=o;break;case"number":b.number=o;break;case"pathname":default:b.term=location.pathname.length<2?"index":location.pathname.substring(1).replace(/\.\w+$/,"")}return`https://giscus.app/${l}/widget?${new URLSearchParams(b)}`}((i=c({},e),t(i,s({session:r}))));var i;const u=a.useRef(null);return a.useEffect((()=>{const e=location.href,t=new URL(e),s=localStorage.getItem("giscus-session"),r=t.searchParams.get("giscus")||"";if(r)return localStorage.setItem("giscus-session",JSON.stringify(r)),n(r),t.searchParams.delete("giscus"),void history.replaceState(void 0,document.title,t.toString());if(s)try{n(JSON.parse(s||"")||"")}catch(o){n(""),localStorage.removeItem("giscus-session"),console.warn(`${m(null==o?void 0:o.message)} Session has been cleared.`)}}),[]),a.useEffect(f,[]),a.useEffect((()=>{const e=function(e,t=null){return function(s){if("https://giscus.app"!==s.origin)return;const{data:r}=s;if("object"!=typeof r||!r.giscus)return;if(t&&r.giscus.resizeHeight&&(t.style.height=`${r.giscus.resizeHeight}px`),!r.giscus.error)return;const n=r.giscus.error;if(n.includes("Bad credentials")||n.includes("Invalid state value")){if(null!==localStorage.getItem("giscus-session"))return localStorage.removeItem("giscus-session"),e(),void console.warn(`${m(n)} Session has been cleared.`);console.error(`${m(n)} No session is stored initially. ${g}`)}n.includes("Discussion not found")?console.warn(`[giscus] ${n}. A new discussion will be created if a comment/reaction is submitted.`):console.error(`${m(n)} ${g}`)}}((()=>n("")),u.current);return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[]),l.default.createElement("div",{className:"giscus"},l.default.createElement("iframe",{className:"giscus-frame",title:"Comments",scrolling:"no",src:o,ref:u}))}exports.Giscus=function(e){const[t,s]=a.useState(!1);return a.useEffect((()=>s(!0)),[]),t?l.default.createElement(p,c({},e)):null};
