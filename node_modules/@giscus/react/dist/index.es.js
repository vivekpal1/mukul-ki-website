var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,c=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&i(e,s,t[s]);if(r)for(var s of r(t))o.call(t,s)&&i(e,s,t[s]);return e};import a,{useState as l,useEffect as u,useRef as m}from"react";const g="Please consider reporting this error at https://github.com/laymonage/giscus/issues/new.";function d(e){return`[giscus] An error occurred. Error message: "${e}".`}function p(e){const t=document.querySelector(`meta[property='og:${e}'],meta[name='${e}']`);return t?t.content:""}function f(){const e=document.getElementById("giscus-css")||document.createElement("style");e.id="giscus-css",e.textContent="\n    .giscus, .giscus-frame {\n      width: 100%;\n    }\n    .giscus-frame {\n      border: none;\n      color-scheme: normal;\n    }\n  ",document.head.prepend(e)}function h(e){const[r,n]=l(""),o=function({repo:e,repoId:t,category:s="",categoryId:r="",mapping:n,term:o="",theme:i="light",reactionsEnabled:c="1",emitMetadata:a="0",inputPosition:l="bottom",lang:u="en",session:m,origin:g}){const d=new URL(location.href);d.searchParams.delete("giscus");const f=d.toString(),h={origin:g=g||f,session:m,theme:i,reactionsEnabled:c,emitMetadata:a,inputPosition:l,repo:e,repoId:t,category:s,categoryId:r,description:p("description")};switch(n){case"url":h.term=f;break;case"title":h.term=document.title;break;case"og:title":h.term=p("title");break;case"specific":h.term=o;break;case"number":h.number=o;break;case"pathname":default:h.term=location.pathname.length<2?"index":location.pathname.substring(1).replace(/\.\w+$/,"")}return`https://giscus.app/${u}/widget?${new URLSearchParams(h)}`}((i=c({},e),t(i,s({session:r}))));var i;const h=m(null);return u((()=>{const e=location.href,t=new URL(e),s=localStorage.getItem("giscus-session"),r=t.searchParams.get("giscus")||"";if(r)return localStorage.setItem("giscus-session",JSON.stringify(r)),n(r),t.searchParams.delete("giscus"),void history.replaceState(void 0,document.title,t.toString());if(s)try{n(JSON.parse(s||"")||"")}catch(o){n(""),localStorage.removeItem("giscus-session"),console.warn(`${d(null==o?void 0:o.message)} Session has been cleared.`)}}),[]),u(f,[]),u((()=>{const e=function(e,t=null){return function(s){if("https://giscus.app"!==s.origin)return;const{data:r}=s;if("object"!=typeof r||!r.giscus)return;if(t&&r.giscus.resizeHeight&&(t.style.height=`${r.giscus.resizeHeight}px`),!r.giscus.error)return;const n=r.giscus.error;if(n.includes("Bad credentials")||n.includes("Invalid state value")){if(null!==localStorage.getItem("giscus-session"))return localStorage.removeItem("giscus-session"),e(),void console.warn(`${d(n)} Session has been cleared.`);console.error(`${d(n)} No session is stored initially. ${g}`)}n.includes("Discussion not found")?console.warn(`[giscus] ${n}. A new discussion will be created if a comment/reaction is submitted.`):console.error(`${d(n)} ${g}`)}}((()=>n("")),h.current);return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[]),a.createElement("div",{className:"giscus"},a.createElement("iframe",{className:"giscus-frame",title:"Comments",scrolling:"no",src:o,ref:h}))}function b(e){const[t,s]=l(!1);return u((()=>s(!0)),[]),t?a.createElement(h,c({},e)):null}export{b as Giscus};
